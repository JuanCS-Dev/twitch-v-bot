<section class="grid-two" id="intelligenceSection">
  <article class="panel">
    <h2>Streamer HUD</h2>
    <p class="panel-hint">
      Sugestoes privadas do agente para o streamer. Atualizacao em tempo real
      (3s).
    </p>

    <div
      class="form-row"
      style="
        align-items: center;
        justify-content: space-between;
        gap: var(--spacing-2);
        margin-bottom: var(--spacing-3);
        flex-wrap: wrap;
      "
    >
      <div
        class="form-row"
        style="align-items: center; gap: var(--spacing-2); margin: 0"
      >
        <span class="chip pending"
          >Messages: <span id="hudMessageCount">0</span></span
        >
        <label
          class="toggle-switch"
          style="font-size: 0.85rem; color: var(--text-muted)"
        >
          <input id="hudTtsToggle" type="checkbox" />
          <span class="toggle-slider"></span>
          TTS (Voice)
        </label>
      </div>
      <a
        id="hudOverlayLink"
        class="btn btn-secondary"
        href="/dashboard/hud"
        target="_blank"
        rel="noopener noreferrer"
      >
        Abrir Overlay OBS
      </a>
    </div>

    <p
      class="panel-hint"
      style="
        margin-top: calc(var(--spacing-3) * -1);
        margin-bottom: var(--spacing-3);
      "
    >
      Browser source: <code id="hudOverlayUrl">/dashboard/hud</code>
    </p>

    <ul
      id="hudMessagesList"
      class="events-list"
      style="max-height: 360px; overflow-y: auto"
    >
      <li style="font-style: italic; color: var(--text-muted)">
        Nenhuma sugestão do agente ainda.
      </li>
    </ul>
  </article>

  <article class="panel">
    <h2>Intelligence Overview</h2>
    <p class="panel-hint">
      Status consolidado das engines de visão, sentimento e recap. Análise
      contínua do comportamento do chat.
    </p>

    <div
      style="
        margin: var(--spacing-5) 0;
        padding: var(--spacing-4);
        background: var(--bg-base);
        border-radius: var(--radius-md);
        border: 1px solid var(--border-default);
      "
    >
      <div
        style="
          display: flex;
          justify-content: space-between;
          margin-bottom: var(--spacing-2);
        "
      >
        <span
          style="font-size: 0.85rem; color: var(--text-muted); font-weight: 600"
          >Sentiment Vibe</span
        >
        <span
          id="intSentimentVibe"
          style="
            font-family: var(--font-family-mono);
            font-weight: 700;
            color: var(--text-primary);
          "
          >Chill</span
        >
      </div>
      <!-- Vanilla CSS Progress Bar -->
      <div
        style="
          width: 100%;
          height: 8px;
          background: color-mix(
            in srgb,
            var(--status-error) 20%,
            var(--bg-elevated)
          );
          border-radius: var(--radius-pill);
          overflow: hidden;
          display: flex;
        "
      >
        <div
          id="sentimentProgressBar"
          style="
            height: 100%;
            background: var(--status-ok);
            width: 50%;
            transition: width var(--transition-elastic);
          "
        ></div>
      </div>
      <div
        style="
          display: flex;
          justify-content: space-between;
          margin-top: var(--spacing-2);
          font-size: 0.75rem;
          color: var(--text-muted);
          font-family: var(--font-family-mono);
        "
      >
        <span>Pos <span id="intSentimentPositive">0</span></span>
        <span>Neg <span id="intSentimentNegative">0</span></span>
      </div>
    </div>

    <dl class="kv">
      <div>
        <dt>Vision Status</dt>
        <dd id="intVisionStatus">Idle</dd>
      </div>
      <div>
        <dt>Vision Frames Total</dt>
        <dd id="intVisionFramesTotal">0</dd>
      </div>
      <div>
        <dt>Vision Last Analysis</dt>
        <dd id="intVisionLastAnalysis">-</dd>
      </div>
      <div>
        <dt>Sentiment Score (avg)</dt>
        <dd id="intSentimentAvg">0.00</dd>
      </div>
      <div>
        <dt>Sentiment Messages</dt>
        <dd id="intSentimentCount">0</dd>
      </div>
      <div>
        <dt>Stream Health Score</dt>
        <dd id="intStreamHealthScore">0/100</dd>
      </div>
      <div>
        <dt>Stream Health Band</dt>
        <dd id="intStreamHealthBand">Critical</dd>
      </div>
    </dl>

    <hr style="border: none; border-top: 1px solid var(--border-default)" />

    <div
      class="form-row"
      style="
        align-items: center;
        justify-content: space-between;
        gap: var(--spacing-3);
      "
    >
      <span id="intPostStreamStatusChip" class="chip pending">NO REPORT</span>
      <button
        id="intPostStreamGenerateBtn"
        class="btn btn-secondary"
        type="button"
      >
        Gerar Post-Stream Report
      </button>
    </div>

    <dl class="kv">
      <div>
        <dt>Report Generated At</dt>
        <dd id="intPostStreamGeneratedAt">-</dd>
      </div>
      <div>
        <dt>Trigger</dt>
        <dd id="intPostStreamTrigger">-</dd>
      </div>
    </dl>

    <p id="intPostStreamSummary" class="panel-hint">
      Sem relatorio pos-live para este canal. Gere manualmente para registrar o
      resumo da sessao.
    </p>

    <p class="panel-hint" style="margin-bottom: var(--spacing-2)">
      Recommendations
    </p>
    <ul
      id="intPostStreamRecommendations"
      class="events-list"
      style="max-height: 200px"
    >
      <li style="font-style: italic; color: var(--text-muted)">
        Sem recomendacoes registradas.
      </li>
    </ul>

    <hr style="border: none; border-top: 1px solid var(--border-default)" />

    <p class="panel-hint" style="margin-bottom: var(--spacing-2)">
      Semantic Memory
    </p>
    <p id="intSemanticMemoryStatusHint" class="panel-hint">
      Memoria semantica por canal com busca e edicao no fluxo operacional atual.
    </p>

    <div
      class="form-row"
      style="
        align-items: center;
        justify-content: space-between;
        gap: var(--spacing-2);
        margin-bottom: var(--spacing-2);
        flex-wrap: wrap;
      "
    >
      <input
        id="intSemanticMemoryQueryInput"
        type="text"
        placeholder="Buscar memoria semantica por frase..."
        style="flex: 1; min-width: 220px"
      />
      <button
        id="intSemanticMemorySearchBtn"
        class="btn btn-secondary"
        type="button"
      >
        Buscar
      </button>
    </div>

    <div class="form-row" style="gap: var(--spacing-2); margin-bottom: var(--spacing-2)">
      <input
        id="intSemanticMemoryTypeInput"
        type="text"
        value="fact"
        placeholder="Tipo (fact/preference/event/instruction/context)"
        style="max-width: 220px"
      />
      <input
        id="intSemanticMemoryTagsInput"
        type="text"
        placeholder="Tags (ex: game,lore,meta)"
        style="flex: 1"
      />
    </div>

    <div
      class="form-row"
      style="
        align-items: center;
        gap: var(--spacing-2);
        margin-bottom: var(--spacing-2);
      "
    >
      <input
        id="intSemanticMemoryContentInput"
        type="text"
        placeholder="Nova memoria semantica para o canal focado..."
        style="flex: 1"
      />
      <button
        id="intSemanticMemorySaveBtn"
        class="btn btn-primary"
        type="button"
      >
        Salvar
      </button>
    </div>

    <p class="panel-hint" style="margin-bottom: var(--spacing-2)">
      Search Matches
    </p>
    <ul id="intSemanticMemoryMatches" class="events-list" style="max-height: 180px">
      <li style="font-style: italic; color: var(--text-muted)">
        Sem correspondencias semanticas.
      </li>
    </ul>

    <p class="panel-hint" style="margin-top: var(--spacing-3); margin-bottom: var(--spacing-2)">
      Latest Entries
    </p>
    <ul id="intSemanticMemoryEntries" class="events-list" style="max-height: 180px">
      <li style="font-style: italic; color: var(--text-muted)">
        Nenhuma memoria persistida para este canal.
      </li>
    </ul>
  </article>
</section>
