<section class="grid-two" id="intelligenceSection">
  <article class="panel">
    <h2>Streamer HUD</h2>
    <p class="panel-hint">
      Private agent suggestions for the streamer. Real-time refresh (3s).
    </p>

    <div
      class="form-row form-row-center form-row-between form-row-gap-2 form-row-mb-3 form-row-wrap"
    >
      <div class="form-row form-row-center form-row-gap-2 form-row-m0">
        <span class="chip pending"
          >Messages: <span id="hudMessageCount">0</span></span
        >
        <label class="toggle-switch toggle-switch-muted">
          <input id="hudTtsToggle" type="checkbox" />
          <span class="toggle-slider"></span>
          TTS (Voice)
        </label>
      </div>
      <a
        id="hudOverlayLink"
        class="btn btn-secondary"
        href="/dashboard/hud"
        target="_blank"
        rel="noopener noreferrer"
      >
        Open OBS Overlay
      </a>
    </div>

    <p class="panel-hint panel-hint-overlap">
      Browser source: <code id="hudOverlayUrl">/dashboard/hud</code>
    </p>

    <ul id="hudMessagesList" class="events-list events-scroll-360">
      <li class="text-muted-italic">No agent suggestions yet.</li>
    </ul>
  </article>

  <article class="panel">
    <h2>Intelligence Overview</h2>
    <p class="panel-hint">
      Consolidated status for sentiment, vision, coaching, and post-live
      insights. Primary live decisions stay visible, while secondary workflows
      stay in progressive disclosure.
    </p>

    <section
      id="intelligenceTacticalCoachingBlock"
      aria-labelledby="intTacticalCoachingHeading"
    >
      <h3 id="intTacticalCoachingHeading">Tactical Coaching</h3>
      <p class="panel-hint">
        Live sentiment and vision signals with churn-aware coaching for the
        focused channel.
      </p>

      <div class="section-surface">
        <div class="sentiment-header-row">
          <span class="sentiment-label">Sentiment Vibe</span>
          <span id="intSentimentVibe" class="mono-strong">Chill</span>
        </div>
        <!-- Vanilla CSS Progress Bar -->
        <div class="sentiment-track">
          <div id="sentimentProgressBar" class="sentiment-progress"></div>
        </div>
        <div class="sentiment-scale-row">
          <span>Pos <span id="intSentimentPositive">0</span></span>
          <span>Neg <span id="intSentimentNegative">0</span></span>
        </div>
      </div>
      <dl class="kv">
        <div>
          <dt>Vision Status</dt>
          <dd id="intVisionStatus">Idle</dd>
        </div>
        <div>
          <dt>Vision Frames Total</dt>
          <dd id="intVisionFramesTotal">0</dd>
        </div>
        <div>
          <dt>Vision Last Analysis</dt>
          <dd id="intVisionLastAnalysis">-</dd>
        </div>
        <div>
          <dt>Sentiment Score (avg)</dt>
          <dd id="intSentimentAvg">0.00</dd>
        </div>
        <div>
          <dt>Sentiment Messages</dt>
          <dd id="intSentimentCount">0</dd>
        </div>
        <div>
          <dt>Stream Health Score</dt>
          <dd id="intStreamHealthScore">0/100</dd>
        </div>
        <div>
          <dt>Stream Health Band</dt>
          <dd id="intStreamHealthBand">Critical</dd>
        </div>
      </dl>

      <div class="form-row form-row-center form-row-between form-row-gap-3">
        <span id="intCoachingRiskChip" class="chip pending">CHURN LOW</span>
        <span id="intCoachingHudStatus" class="panel-hint">HUD idle</span>
      </div>

      <dl class="kv">
        <div>
          <dt>Viewer Churn Risk</dt>
          <dd id="intCoachingRiskScore">0/100</dd>
        </div>
        <div>
          <dt>Last HUD Emission</dt>
          <dd id="intCoachingLastEmission">-</dd>
        </div>
      </dl>

      <p id="intCoachingHint" class="panel-hint">
        No churn signals at the moment. Tactical coaching updates in this panel
        without opening a parallel dashboard.
      </p>

      <ul id="intCoachingAlerts" class="events-list events-scroll-180">
        <li class="text-muted-italic">No tactical alerts right now.</li>
      </ul>
    </section>

    <details class="advanced-settings">
      <summary>Post-Live Intelligence Tools</summary>
      <div class="advanced-settings-content">
        <section
          id="intelligencePostStreamBlock"
          aria-labelledby="intPostStreamHeading"
        >
          <h3 id="intPostStreamHeading">Post-Stream Report</h3>
          <p class="panel-hint">
            Persistent recap for the selected channel, generated on demand or
            after a successful part.
          </p>

          <div class="form-row form-row-center form-row-between form-row-gap-3">
            <span id="intPostStreamStatusChip" class="chip pending"
              >NO REPORT</span
            >
            <button
              id="intPostStreamGenerateBtn"
              class="btn btn-secondary"
              type="button"
            >
              Generate Post-Stream Report
            </button>
          </div>

          <dl class="kv">
            <div>
              <dt>Report Generated At</dt>
              <dd id="intPostStreamGeneratedAt">-</dd>
            </div>
            <div>
              <dt>Trigger</dt>
              <dd id="intPostStreamTrigger">-</dd>
            </div>
          </dl>

          <p id="intPostStreamSummary" class="panel-hint">
            No post-live report for this channel. Generate one manually to
            register the session summary.
          </p>

          <p class="panel-hint panel-hint-mb-2">Recommendations</p>
          <ul
            id="intPostStreamRecommendations"
            class="events-list events-scroll-200"
          >
            <li class="text-muted-italic">No recommendations recorded.</li>
          </ul>
        </section>

        <section
          id="intelligenceSemanticMemoryBlock"
          aria-labelledby="intSemanticMemoryHeading"
        >
          <h3 id="intSemanticMemoryHeading">Semantic Memory</h3>
          <p id="intSemanticMemoryStatusHint" class="panel-hint">
            Per-channel semantic memory with search and edit in the current
            operational flow.
          </p>

          <div
            class="form-row form-row-center form-row-between form-row-gap-2 form-row-mb-2 form-row-wrap"
          >
            <input
              id="intSemanticMemoryQueryInput"
              type="text"
              placeholder="Search semantic memory by phrase..."
              class="u-flex-1 form-group-min-220"
            />
            <button
              id="intSemanticMemorySearchBtn"
              class="btn btn-secondary"
              type="button"
            >
              Search
            </button>
          </div>

          <div
            class="form-row form-row-center form-row-between form-row-gap-2 form-row-mb-2 form-row-wrap"
          >
            <input
              id="intSemanticMemoryMinSimilarityInput"
              type="number"
              step="0.01"
              min="-1"
              max="1"
              placeholder="Min similarity (-1 to 1)"
              class="u-maxw-220"
            />
            <label class="toggle-switch toggle-switch-muted">
              <input
                id="intSemanticMemoryForceFallbackToggle"
                type="checkbox"
              />
              <span class="toggle-slider"></span>
              Force deterministic fallback
            </label>
            <span id="intSemanticMemoryEngineChip" class="chip pending"
              >ENGINE IDLE</span
            >
          </div>

          <p
            id="intSemanticMemoryEngineHint"
            class="panel-hint panel-hint-mb-2"
          >
            Search mode is idle until query execution.
          </p>

          <div class="form-row form-row-gap-2 form-row-mb-2">
            <input
              id="intSemanticMemoryTypeInput"
              type="text"
              value="fact"
              placeholder="Type (fact/preference/event/instruction/context)"
              class="u-maxw-220"
            />
            <input
              id="intSemanticMemoryTagsInput"
              type="text"
              placeholder="Tags (e.g. game,lore,meta)"
              class="u-flex-1"
            />
          </div>

          <div class="form-row form-row-center form-row-gap-2 form-row-mb-2">
            <input
              id="intSemanticMemoryContentInput"
              type="text"
              placeholder="New semantic memory entry for the focused channel..."
              class="u-flex-1"
            />
            <button
              id="intSemanticMemorySaveBtn"
              class="btn btn-primary"
              type="button"
            >
              Save
            </button>
          </div>

          <p class="panel-hint panel-hint-mb-2">Search Matches</p>
          <ul
            id="intSemanticMemoryMatches"
            class="events-list events-scroll-180"
          >
            <li class="text-muted-italic">No semantic matches.</li>
          </ul>

          <p class="panel-hint panel-hint-mt-3 panel-hint-mb-2">
            Latest Entries
          </p>
          <ul
            id="intSemanticMemoryEntries"
            class="events-list events-scroll-180"
          >
            <li class="text-muted-italic">
              No persisted memory for this channel.
            </li>
          </ul>
        </section>

        <section
          id="intelligenceRevenueAttributionBlock"
          aria-labelledby="intRevenueAttributionHeading"
        >
          <h3 id="intRevenueAttributionHeading">Revenue Attribution</h3>
          <p class="panel-hint">
            Simulate and inspect conversion traces linked to channel events.
          </p>

          <div class="form-row form-row-gap-2 form-row-mb-2">
            <select id="intRevenueEventType" class="u-flex-1">
              <option value="sub">Sub</option>
              <option value="follow">Follow</option>
              <option value="cheer">Cheer</option>
            </select>
            <input
              id="intRevenueViewerLogin"
              type="text"
              placeholder="Viewer Login"
              class="u-flex-1"
            />
            <input
              id="intRevenueValue"
              type="number"
              step="0.01"
              placeholder="Value (e.g. 4.99)"
              class="u-flex-1"
            />
            <button
              id="intRevenueSimulateBtn"
              class="btn btn-secondary"
              type="button"
            >
              Simulate
            </button>
          </div>

          <ul id="intRevenueConversions" class="events-list events-scroll-180">
            <li class="text-muted-italic">
              No recent conversions for this channel.
            </li>
          </ul>
        </section>
      </div>
    </details>
  </article>
</section>
