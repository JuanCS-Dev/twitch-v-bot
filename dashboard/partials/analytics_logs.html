<section id="analyticsQuickInsightsSection">
  <article class="panel">
    <h2>Analytics Decision Brief</h2>
    <p id="analyticsQuickInsightHint" class="panel-hint">
      Loading analytics signals for decision support...
    </p>
    <div class="grid-cards">
      <article class="card summary-card status-info">
        <h2>Focused Channel</h2>
        <p id="analyticsQuickFocusedChannel" class="metric">default</p>
        <div class="summary-chips-row">
          <span id="analyticsQuickRuntimeChip" class="chip pending"
            >RUNTIME COLD</span
          >
          <span id="analyticsQuickPersistenceChip" class="chip pending"
            >PERSISTENCE IDLE</span
          >
        </div>
      </article>

      <article class="card summary-card status-info">
        <h2>Stream Health</h2>
        <p id="analyticsQuickHealthScore" class="metric">0/100</p>
        <div class="summary-chips-row">
          <span id="analyticsQuickHealthBandChip" class="chip pending"
            >CRITICAL</span
          >
          <span id="analyticsQuickIgnoredRate" class="chip pending"
            >IGNORED 0.0%</span
          >
        </div>
      </article>

      <article class="card summary-card status-info">
        <h2>Engagement Momentum</h2>
        <p id="analyticsQuickMessagesPerMinute" class="summary-value">
          0.00 / 0.00 mpm
        </p>
        <p id="analyticsQuickTriggerRate" class="summary-meta">
          0.0% trigger rate (60m)
        </p>
      </article>

      <article class="card summary-card status-info">
        <h2>Cost and Errors</h2>
        <p id="analyticsQuickCost60m" class="summary-value">$0.0000</p>
        <p id="analyticsQuickErrors" class="summary-meta">0 errors</p>
      </article>
    </div>
  </article>
</section>

<section class="grid-two" id="analyticsRuntimeSection">
  <article class="panel">
    <h2>Runtime Context</h2>
    <div
      class="form-row"
      style="
        align-items: center;
        gap: var(--spacing-2);
        margin-bottom: var(--spacing-3);
      "
    >
      <span class="chip">Focused Channel</span>
      <span id="ctxSelectedChannelChip" class="chip pending">default</span>
      <span id="ctxPersistedStatusChip" class="chip pending"
        >PERSISTENCE IDLE</span
      >
      <span id="ctxRuntimeStatusChip" class="chip pending">RUNTIME COLD</span>
    </div>
    <dl class="kv">
      <div>
        <dt>Core Mode</dt>
        <dd id="ctxMode">-</dd>
      </div>
      <div>
        <dt>Bot Uptime</dt>
        <dd id="ctxUptime">-</dd>
      </div>
      <div>
        <dt>Stream Vibe Meta</dt>
        <dd id="ctxVibe">-</dd>
      </div>
      <div>
        <dt>Last Event</dt>
        <dd id="ctxLastEvent">-</dd>
      </div>
      <div>
        <dt>Active Thread Contexts</dt>
        <dd id="ctxActiveContexts">0</dd>
      </div>
      <div>
        <dt>Unique Chatters Observed</dt>
        <dd id="ctxUniqueChatters">0</dd>
      </div>
      <div>
        <dt>Last AI Prompt</dt>
        <dd id="ctxLastPrompt">-</dd>
      </div>
      <div>
        <dt>Last AI Reply</dt>
        <dd id="ctxLastReply">-</dd>
      </div>
      <div>
        <dt>Sentiment Vibe</dt>
        <dd id="ctxSentimentVibe">-</dd>
      </div>
      <div>
        <dt>Sentiment Score</dt>
        <dd id="ctxSentimentAvg">0.00</dd>
      </div>
      <div>
        <dt>Stream Health Score</dt>
        <dd id="ctxStreamHealthScore">0/100</dd>
      </div>
      <div>
        <dt>Stream Health Band</dt>
        <dd id="ctxStreamHealthBand">Critical</dd>
      </div>
      <div>
        <dt>Vision Frames</dt>
        <dd id="ctxVisionFrames">0</dd>
      </div>
      <div>
        <dt>Vision Last</dt>
        <dd id="ctxVisionLast">-</dd>
      </div>
    </dl>
    <h3>Short/Temporary Memory</h3>
    <ul id="contextItems" class="context-list"></ul>
  </article>

  <article class="panel">
    <h2>Timeline Logs Realtime (Last 30 min)</h2>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Time UTC</th>
            <th>IRC Chat</th>
            <th>Ai Trigg</th>
            <th>Ai Rply</th>
            <th>LLM Req</th>
            <th>Errors</th>
          </tr>
        </thead>
        <tbody id="timelineBody"></tbody>
      </table>
    </div>
  </article>
</section>

<section class="grid-two" id="analyticsDiagnosticsSection">
  <article class="panel">
    <h2>Deep Analytics (60m)</h2>
    <dl class="kv">
      <div>
        <dt>Traffic Velocity (10/60m)</dt>
        <dd><span id="aMpm10m">0</span> / <span id="aMpm60m">0</span> mpm</dd>
      </div>
      <div>
        <dt>Total Churn (10/60m)</dt>
        <dd>
          <span id="aMessages10m">0</span> /
          <span id="aMessages60m">0</span> msgs
        </dd>
      </div>
      <div>
        <dt>Payload Avg Len (10/60m)</dt>
        <dd>
          <span id="aAvgLen10m">0</span> / <span id="aAvgLen60m">0</span> char
        </dd>
      </div>
      <div>
        <dt>Commands Triggered</dt>
        <dd>
          <span id="aCommands60m">0</span> (<span id="aCommandRatio60m">0%</span
          >)
        </dd>
      </div>
      <div>
        <dt>Network Links Detected</dt>
        <dd>
          <span id="aUrls60m">0</span> (<span id="aUrlRatio60m">0%</span>)
        </dd>
      </div>
      <div>
        <dt>Route IRC</dt>
        <dd id="aSourceIrc60m">0</dd>
      </div>
      <div>
        <dt>Route EventSub</dt>
        <dd id="aSourceEventsub60m">0</dd>
      </div>
      <div>
        <dt>Route Anomalous</dt>
        <dd id="aSourceUnknown60m">0</dd>
      </div>
      <div>
        <dt>Byte Invokations (10/60m)</dt>
        <dd>
          <span id="aByteTriggers10m">0</span> /
          <span id="aByteTriggers60m">0</span>
        </dd>
      </div>
    </dl>

    <h3 style="margin-top: 1.5rem">API Routes (Truncated)</h3>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Internal Route Name</th>
            <th>Hits</th>
          </tr>
        </thead>
        <tbody id="routesBody"></tbody>
      </table>
    </div>
  </article>

  <article class="panel">
    <h2>Leaderboard Signals</h2>

    <h3 style="margin-top: 0">Top Chatters (60m)</h3>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>UID</th>
            <th>Count</th>
          </tr>
        </thead>
        <tbody id="topChatters60mBody"></tbody>
      </table>
    </div>

    <h3>Top Triggers (60m)</h3>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Actor</th>
            <th>Procs</th>
          </tr>
        </thead>
        <tbody id="topTriggers60mBody"></tbody>
      </table>
    </div>

    <h3>Lifetime Chatters</h3>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>UID</th>
            <th>Count</th>
          </tr>
        </thead>
        <tbody id="topChattersTotalBody"></tbody>
      </table>
    </div>
  </article>
</section>

<section id="analyticsPersistedSection">
  <article class="panel">
    <h2>Persisted History and Comparison</h2>
    <p class="panel-hint">
      Historical snapshots stay separated from live runtime data to improve
      decision clarity under pressure.
    </p>

    <details class="advanced-settings">
      <summary>
        Expanded Context: Persisted State, History and Multi-Channel Comparison
      </summary>
      <div class="advanced-settings-content">
        <h3 style="margin-top: 0">Persisted Channel Snapshot</h3>
        <dl class="kv">
          <div>
            <dt>Persisted Game</dt>
            <dd id="ctxPersistedGame">-</dd>
          </div>
          <div>
            <dt>Persisted Vibe</dt>
            <dd id="ctxPersistedVibe">-</dd>
          </div>
          <div>
            <dt>Persisted Last Event</dt>
            <dd id="ctxPersistedLastEvent">-</dd>
          </div>
          <div>
            <dt>Persisted Style</dt>
            <dd id="ctxPersistedStyle">-</dd>
          </div>
          <div>
            <dt>Persisted Reply</dt>
            <dd id="ctxPersistedReply">-</dd>
          </div>
          <div>
            <dt>Persisted Notes</dt>
            <dd id="ctxPersistedNotes">-</dd>
          </div>
          <div>
            <dt>Persisted Updated</dt>
            <dd id="ctxPersistedUpdatedAt">-</dd>
          </div>
        </dl>
        <p id="ctxPersistedHint" class="panel-hint">
          Loading persisted state...
        </p>
        <h3>Persisted Recent History</h3>
        <ul id="persistedHistoryItems" class="context-list"></ul>
        <h3>Persisted Channel Timeline</h3>
        <p id="persistedTimelineHint" class="panel-hint">
          Loading persisted timeline...
        </p>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Captured At</th>
                <th>Chat Total</th>
                <th>Byte Triggers</th>
                <th>Replies</th>
                <th>Active 60m</th>
                <th>Errors</th>
                <th>Health</th>
              </tr>
            </thead>
            <tbody id="persistedChannelTimelineBody"></tbody>
          </table>
        </div>
        <h3>Multi-Channel Comparison (Persisted)</h3>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Channel</th>
                <th>Chat Total</th>
                <th>Byte Triggers</th>
                <th>Replies</th>
                <th>Active 60m</th>
                <th>Ignored 60m</th>
                <th>Health</th>
                <th>Captured At</th>
              </tr>
            </thead>
            <tbody id="persistedChannelComparisonBody"></tbody>
          </table>
        </div>
      </div>
    </details>
  </article>
</section>
